(this.webpackJsonpchessjs_client=this.webpackJsonpchessjs_client||[]).push([[0],{158:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(10),i=n.n(c),o=(n(158),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT":return t.square;case"SELECT_RESET":return null;default:return e}}),s=function(e){return{type:"HIGHLIGHT",highlightSquares:e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HIGHLIGHT":return t.highlightSquares;case"RESET_HIGHLIGHT":return{};default:return e}},l={fen:"start",currentPlayer:"",winner:"",history:void 0,potentialMoves:{},isChecked:!1,isGameOver:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CHESS_STATUS":return t.chessStatus;default:return e}},d=n(13),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"",gameLog:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CHAT_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{message:t.message});case"RESET_CHAT_MESSAGE":return Object(d.a)(Object(d.a)({},e),{},{message:""});case"UPDATE_CHAT_LOG":return Object(d.a)(Object(d.a)({},e),{},{gameLog:t.gameLog});default:return e}},m=function(e){return{type:"SET_ROOM_JOINED",joinedRoom:e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{rooms:[],roomJoined:null,newRoomInfo:{side:"white"}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NEW_ROOM_PLAYER_SIDE":return Object(d.a)(Object(d.a)({},e),{},{newRoomInfo:Object(d.a)(Object(d.a)({},e.newRoomInfo),{},{side:t.side})});case"SET_ROOM_JOINED":return Object(d.a)(Object(d.a)({},e),{},{joinedRoom:t.joinedRoom});case"RESET_ROOM_JOINED":return Object(d.a)(Object(d.a)({},e),{},{joinedRoom:null});case"SET_AVAILABLE_ROOMS":return Object(d.a)(Object(d.a)({},e),{},{rooms:t.availableRooms});default:return e}},O=function(e){return{type:"SET_USER",user:e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{userName:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.user;default:return e}},g=n(62),x=n(9),f=n(125),v=n.n(f).a.connect("https://wddnguyen-chess-js.herokuapp.com/"),y=a.a.createContext(),S=n(245),N=n(250),E=n(251),w=n(248),_=n(130),C=n.n(_),T=n(85),k=n(15),R=n(2),I=function(e){var t=e.user,n=Object(k.f)(),r=Object(S.a)((function(e){return{loginButton:{marginLeft:"auto",margin:e.spacing(2)}}}))();return void 0===t.userName?Object(R.jsx)(w.a,{className:r.loginButton,color:"inherit",onClick:function(){n.push("/signin")},children:Object(R.jsx)(T.a,{variant:"h6",children:"Login"})}):Object(R.jsxs)(w.a,{className:r.loginButton,color:"inherit",children:[Object(R.jsx)(T.a,{variant:"h6",children:t.userName}),Object(R.jsx)(C.a,{})]})},A=n(21),L=function(){var e=Object(x.c)((function(e){return e.user})),t=Object(S.a)((function(e){return{root:{flexGrow:1,display:"flex",justifyContent:"flex-end",marginBottom:"10px"},navItem:{marginRight:e.spacing(4)},link:{color:e.palette.background.paper,textDecoration:"none",":hover":{color:"#00F"}}}}))();return Object(R.jsx)("div",{className:t.root,children:Object(R.jsx)(N.a,{position:"static",children:Object(R.jsxs)(E.a,{children:[Object(R.jsx)(T.a,{className:t.navItem,variant:"h4",children:"Chess JS"}),Object(R.jsx)(A.b,{className:t.link,to:"/lobby",children:Object(R.jsx)(w.a,{edge:"start",className:t.navItem,color:"inherit",children:Object(R.jsx)(T.a,{variant:"h6",children:"Lobby"})})}),Object(R.jsx)(I,{user:e})]})})})},G=n(39),H=n(135),q=n(131),B=n.n(q),D=n(5),P=n(255),W=n(257),M=n(252),U=n(254),J=n(256),F=n(253),V=function(e){var t=e.history,n=Object(S.a)({table:{minWidth:"540px",height:"300px",overflowY:"auto",border:"1px solid black",borderRadius:"5px",marginBottom:"5px"}}),r=Object(D.a)((function(e){return{head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:18}}}))(M.a),a=Object(D.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.divider}}}}))(F.a),c=function(e,t,n){return{t:e,w:t,b:n}},i=function(e){var t=[];if(void 0===e)return t;for(var n=1;e.length;){var r=e.splice(0,2);t.push(c(n,r[0],r[1])),n++}return t}(t),o=n();return Object(R.jsx)(U.a,{className:o.table,children:Object(R.jsxs)(P.a,{size:"small",children:[Object(R.jsx)(J.a,{children:Object(R.jsxs)(F.a,{children:[Object(R.jsx)(r,{children:"Turn"}),Object(R.jsx)(r,{children:"White"}),Object(R.jsx)(r,{children:"Black"})]})}),Object(R.jsx)(W.a,{children:i.map((function(e){return Object(R.jsxs)(a,{children:[Object(R.jsx)(r,{children:e.t}),Object(R.jsx)(r,{children:e.w}),Object(R.jsx)(r,{children:e.b})]},e.t)}))})]})})},Y=n(258),z=n(259),K=n(260),Q=n(264),X=n(132),Z=n.n(X),$=n(269),ee=function(){var e=Object(r.useContext)(y),t=Object(x.b)(),n=Object(x.c)((function(e){return e.user})),a=Object(x.c)((function(e){return e.lobby.joinedRoom})),c=Object(x.c)((function(e){return e.chat.message})),i=Object(x.c)((function(e){return e.chat.gameLog})),o=Object(S.a)((function(){return{root:{height:"400px"},messageArea:{height:"300px",overflow:"auto",border:"2px solid black",borderRadius:"5px"},messageBox:{height:"60px",marginTop:"5px"},messageBoxText:{height:"100%",width:"78%",borderRadius:"5px",marginRight:"3px"},messageBoxSend:{width:"auto",height:"100%"}}}))();return Object(r.useEffect)((function(){e.emit("request_game_log",{roomId:a}),e.on("game_log",(function(e){var n=e.gameLog;t(function(e){return{type:"UPDATE_CHAT_LOG",gameLog:e}}(n))}))}),[e,t,c,a,n]),Object(R.jsxs)("div",{className:o.root,children:[Object(R.jsx)(Y.a,{dense:!0,className:o.messageArea,children:i.map((function(e){return Object(R.jsx)(z.a,{children:Object(R.jsx)(K.a,{children:e})},e)}))}),Object(R.jsxs)("form",{onSubmit:function(r){r.preventDefault(),e.emit("message",{roomId:a,user:n,message:c}),t({type:"RESET_CHAT_MESSAGE"})},className:o.messageBox,children:[Object(R.jsx)($.a,{className:o.messageBoxText,placeholder:"Type something",value:c,onChange:function(e){t(function(e){return{type:"SET_CHAT_MESSAGE",message:e}}(e.target.value))},variant:"outlined"}),Object(R.jsx)(Q.a,{variant:"contained",className:o.messageBoxSend,color:"primary",endIcon:Object(R.jsx)(Z.a,{}),type:"submit",children:"send"})]})]})},te=function(e){var t=e.isChecked,n=e.isGameOver,r=e.winner,a=e.currentPlayer,c=Object(S.a)((function(e){return{grid:{width:"540px",textAlign:"center"},status:{backgroundColor:e.palette.primary.main,color:e.palette.common.white}}}))();return t||n?n?Object(R.jsxs)(T.a,{variant:"h5",className:c.status,children:["Winner: ",r]}):t?Object(R.jsxs)(T.a,{variant:"h5",className:c.status,children:["Checked: ",a]}):void 0:null},ne=n(265),re=function(){var e=Object(r.useContext)(y),t=Object(x.b)(),n=Object(x.c)((function(e){return e.lobby.joinedRoom})),a=Object(x.c)((function(e){return e.selectedSquare})),c=Object(x.c)((function(e){return e.highlightSquares})),i=Object(x.c)((function(e){return e.user})),o=Object(x.c)((function(e){return e.chess})),u=Object(S.a)((function(e){return{grid:{width:"540px",textAlign:"center"},status:{backgroundColor:e.palette.primary.main,color:e.palette.common.white}}}));Object(r.useEffect)((function(){e.emit("chess_state",{roomId:n}),e.on("chess_state",(function(e){t(function(e){return{type:"UPDATE_CHESS_STATUS",chessStatus:e}}(e))}))}),[e,t,n]);var l=u();return Object(R.jsxs)(ne.a,{container:!0,justify:"center",spacing:4,children:[Object(R.jsx)(ne.a,{item:!0,children:Object(R.jsxs)("div",{className:l.grid,children:[Object(R.jsx)(te,{isChecked:o.isChecked,isGameOver:o.isGameOver,winner:o.winner,currentPlayer:o.currentPlayer}),Object(R.jsxs)(T.a,{variant:"h4",className:l.status,children:["Turn: ",o.currentPlayer]}),Object(R.jsx)(B.a,{width:540,position:o.fen,draggable:!1,onSquareClick:function(r){if(o.isGameOver||o.currentPlayer!==i.userName)return null;if(null===a){var c=o.potentialMoves.filter((function(e){return e.from===r}));return c.length>0&&(t(function(e){return{type:"SELECT",square:e}}(r)),function(e){var n=Object(H.a)(e).reduce((function(e,t){var n,r;return"c"===t.flags?Object(d.a)(Object(d.a)({},e),(n={},Object(G.a)(n,t.from,{backgroundColor:"#006600"}),Object(G.a)(n,t.to,{backgroundColor:"#004C99"}),n)):Object(d.a)(Object(d.a)({},e),(r={},Object(G.a)(r,t.from,{backgroundColor:"#006600"}),Object(G.a)(r,t.to,{background:"radial-gradient(circle, #009900 30%, transparent 30%)",backgroundRadius:"30%"}),r))}),{});t(s(n))}(c)),null}var u=o.potentialMoves.find((function(e){return e.from===a&&e.to===r}));u?(!function(e){var n,r=(n={},Object(G.a)(n,e.from,{backgroundColor:"#006600"}),Object(G.a)(n,e.to,{backgroundColor:"#009900"}),n);t(s(r))}(u),e.emit("move",{roomId:n,from:a,to:r})):t({type:"RESET_HIGHLIGHT"}),t({type:"SELECT_RESET"})},squareStyles:c})]})}),Object(R.jsx)(ne.a,{item:!0,xl:6,children:Object(R.jsxs)("div",{className:l.grid,children:[Object(R.jsx)(V,{history:o.history}),Object(R.jsx)(ee,{})]})})]})},ae=n(263),ce=n(268),ie=n(270),oe=n(65),se=n.n(oe),ue=function(){var e=Object(r.useContext)(y),t=Object(k.f)(),n=Object(x.b)(),a=Object(x.c)((function(e){return e.lobby.rooms})),c=Object(x.c)((function(e){return e.lobby.newRoomInfo})),i=Object(x.c)((function(e){return e.lobby.roomJoined})),o=Object(x.c)((function(e){return e.user})),s=Object(S.a)((function(e){return{root:{width:"100%",marginTop:e.spacing(1),textAlign:"center"},grid:{marginTop:e.spacing(2),minWidth:540},colorStyle:{backgroundColor:e.palette.primary.main,color:e.palette.common.white}}}));Object(r.useEffect)((function(){e.on("connect",(function(){e.emit("available_rooms")})),e.on("available_rooms",(function(e){n({type:"SET_AVAILABLE_ROOMS",availableRooms:e})})),e.on("create_room_accepted",(function(e){var t=e.newRoomId;n(m(t))})),e.on("join_room_accepted",(function(e){var t=e.roomName;n(m(t))})),e.on("play_chess_game",(function(e){var n=e.roomName;t.push("/game/".concat(n))}))}),[e,n,t]);var u=s();return void 0!==o&&void 0!==o.userName||t.push("/"),Object(R.jsxs)(ne.a,{container:!0,className:u.root,justify:"center",direction:"column",alignItems:"center",children:[Object(R.jsxs)(ne.a,{item:!0,children:[Object(R.jsx)(T.a,{className:u.colorStyle,variant:"h4",children:"Create Game"}),Object(R.jsx)("form",{onSubmit:function(t){t.preventDefault(),null===i&&e.emit("create_room",{newRoomInfo:c,user:o})},children:Object(R.jsxs)(ae.a,{className:u.grid,variant:"outlined",children:[Object(R.jsx)(ie.a,{htmlFor:"outlined-age-native-simple",children:"Side"}),Object(R.jsxs)(ce.a,{native:!0,value:c.side,onChange:function(e){n({type:"SET_NEW_ROOM_PLAYER_SIDE",side:e.target.value})},label:"Side",children:[Object(R.jsx)("option",{value:"white",children:"White"}),Object(R.jsx)("option",{value:"black",children:"Black"})]}),Object(R.jsx)(Q.a,{variant:"contained",className:u.formButton,color:"primary",endIcon:Object(R.jsx)(se.a,{}),type:"submit",children:"create"})]})})]}),Object(R.jsx)(ne.a,{item:!0,className:u.grid,children:Object(R.jsxs)("div",{children:[Object(R.jsx)(T.a,{className:u.colorStyle,variant:"h4",children:"Available Rooms"}),Object(R.jsx)(Y.a,{children:a.map((function(t){return Object(R.jsx)(z.a,{button:!0,onClick:function(){return n=t.roomName,void(null===i&&e.emit("join_room",{roomName:n,user:o}));var n},children:Object(R.jsx)(K.a,{primary:t.roomOwner.userName,secondary:t.roomName})},t.roomName)}))})]})})]})},le=n(136),je=function(){var e=Object(x.b)(),t=Object(S.a)((function(e){return{root:{textAlign:"center",height:"100vh"},link:{margin:e.spacing(0,2),color:e.palette.background.paper,textDecoration:"none",":hover":{color:"#00F"}},name:{backgroundColor:e.palette.primary.main,color:e.palette.common.white,borderRadius:"30px"}}}))();return Object(R.jsxs)(ne.a,{container:!0,className:t.root,justify:"center",direction:"column",alignItems:"center",spacing:8,children:[Object(R.jsx)(ne.a,{item:!0,className:t.name,children:Object(R.jsx)(T.a,{variant:"h2",children:" Online Chess JS "})}),Object(R.jsxs)(ne.a,{item:!0,children:[Object(R.jsx)(A.b,{className:t.link,to:"/lobby",children:Object(R.jsx)(Q.a,{variant:"contained",color:"primary",onClick:function(){var t=Object(le.a)("1234567890",8),n="Guess-".concat(t());console.log(n),e(O({userName:n}))},endIcon:Object(R.jsx)(se.a,{}),children:"Play as Guest"})}),Object(R.jsx)(A.b,{className:t.link,to:"/signin",children:Object(R.jsx)(Q.a,{variant:"contained",color:"secondary",endIcon:Object(R.jsx)(se.a,{}),children:"Sign in"})})]})]})},de=n(27),be=n.n(de),me=n(49),he=n(271),Oe=n(267),pe=n(83),ge=n.n(pe),xe=n(266),fe=n(84),ve=n(94),ye=n.n(ve),Se="/api/users",Ne=function(){var e=Object(me.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.a.post(Se,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(me.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.a.get(Se,{params:{credentials:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(x.b)(),t=Object(k.f)(),n=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},error:{color:"red"}}})),r=Object(fe.a)({initialValues:{userName:"userName",password:""},validate:function(e){var t={};return e.userName||(t.userName="Required"),e.password||(t.password="Required"),t},onSubmit:function(){var n=Object(me.a)(be.a.mark((function n(r,a){var c,i;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee(r);case 3:c=n.sent,console.log(c),i={userName:c.data.userName},e(O(i)),t.push("/lobby"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a.setFieldError("general",n.t0.response.data.message);case 13:return n.prev=13,a.setSubmitting(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])})));return function(e,t){return n.apply(this,arguments)}}()}),a=n();return Object(R.jsxs)(xe.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(Oe.a,{}),Object(R.jsxs)("div",{className:a.paper,children:[Object(R.jsx)(he.a,{className:a.avatar,children:Object(R.jsx)(ge.a,{})}),Object(R.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(R.jsx)(T.a,{className:a.error,component:"h1",variant:"h5",children:r.errors.general}),Object(R.jsxs)("form",{className:a.form,onSubmit:r.handleSubmit,children:[Object(R.jsx)($.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userName",label:"userName",name:"userName",autoComplete:"userName",autoFocus:!0,value:r.userName,onChange:r.handleChange}),Object(R.jsx)($.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:r.username,onChange:r.handleChange}),Object(R.jsx)(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,children:"Sign In"}),Object(R.jsx)(ne.a,{container:!0,children:Object(R.jsx)(ne.a,{item:!0,children:Object(R.jsx)(A.b,{to:"/signup",children:"Don't have an account? Sign Up"})})})]})]})]})},_e=function(){var e=Object(k.f)(),t=Object(x.b)(),n=Object(fe.a)({initialValues:{userName:"userName",password:""},validate:function(e){var t={};return e.userName||(t.userName="Required"),e.password||(t.password="Required"),t},onSubmit:function(){var n=Object(me.a)(be.a.mark((function n(r,a){var c,i;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ne(r);case 3:c=n.sent,i={userName:c.data.userName},t(O(i)),e.push("/lobby"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a.setFieldError("general",n.t0.response.data.message);case 12:return n.prev=12,a.setSubmitting(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(e,t){return n.apply(this,arguments)}}()}),r=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},error:{color:"red"}}}))();return Object(R.jsxs)(xe.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(Oe.a,{}),Object(R.jsxs)("div",{className:r.paper,children:[Object(R.jsx)(he.a,{className:r.avatar,children:Object(R.jsx)(ge.a,{})}),Object(R.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(R.jsx)(T.a,{className:r.error,component:"h1",variant:"h5",children:n.errors.general}),Object(R.jsxs)("form",{className:r.form,onSubmit:n.handleSubmit,children:[Object(R.jsxs)(ne.a,{container:!0,spacing:2,children:[Object(R.jsx)(ne.a,{item:!0,xs:12,children:Object(R.jsx)($.a,{variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"userName",name:"userName",value:n.userName,onChange:n.handleChange})}),Object(R.jsx)(ne.a,{item:!0,xs:12,children:Object(R.jsx)($.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:n.password,onChange:n.handleChange})})]}),Object(R.jsx)(Q.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:r.submit,children:"Sign Up"}),Object(R.jsx)(ne.a,{container:!0,justify:"flex-end",children:Object(R.jsx)(ne.a,{item:!0,children:Object(R.jsx)(A.b,{to:"/signin",children:"Already have an account? Sign in"})})})]})]})]})},Ce=function(){var e=Object(r.useContext)(y);return Object(r.useEffect)((function(){return function(){e.disconnect()}}),[e]),Object(R.jsx)(A.a,{children:Object(R.jsxs)(k.c,{children:[Object(R.jsxs)(k.a,{path:"/game",children:[Object(R.jsx)(L,{}),Object(R.jsx)(re,{})]}),Object(R.jsxs)(k.a,{path:"/lobby",children:[Object(R.jsx)(L,{}),Object(R.jsx)(ue,{})]}),Object(R.jsx)(k.a,{path:"/signin",children:Object(R.jsx)(we,{})}),Object(R.jsx)(k.a,{path:"/signup",children:Object(R.jsx)(_e,{})}),Object(R.jsx)(k.a,{path:"/",children:Object(R.jsx)(je,{})})]})})},Te=Object(g.b)({selectedSquare:o,highlightSquares:u,chess:j,chat:b,lobby:h,user:p}),ke=Object(g.c)(Te);i.a.render(Object(R.jsx)(x.a,{store:ke,children:Object(R.jsx)(y.Provider,{value:v,children:Object(R.jsx)(Ce,{})})}),document.getElementById("root"))}},[[212,1,2]]]);
//# sourceMappingURL=main.1c4e34af.chunk.js.map